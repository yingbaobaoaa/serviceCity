# AI分析模拟模式使用说明

## 🎯 功能概述

AI分析面板现在支持**模拟模式**，无需配置真实的百度文心一言API密钥也能体验完整的AI分析功能。模拟模式基于预设的智慧城市管理场景，提供真实的分析体验。

## 🚀 快速开始

### 1. 使用模拟模式

1. 打开AIAnalysisPanel组件
2. 确保**模拟模式**开关处于开启状态（蓝色）
3. 选择要分析的城市事件或传感器数据
4. 点击"AI分析"按钮

### 2. 切换模式

- **模拟模式**：使用预设数据，无需API密钥
- **真实API模式**：调用百度文心一言，需要配置API密钥

## 📊 模拟数据场景

### 支持的分析类型

| 数据类型 | 分析内容 | 优先级 |
|---------|---------|-------|
| 道路积水/积水监测 | 排水系统分析、应急处理建议 | 🔴 高 |
| 路灯故障/路灯电流 | 设备老化分析、改造方案 | 🟡 中 |
| 垃圾溢出/垃圾桶满溢 | 清运优化、管理改进 | 🟡 中 |
| 噪音污染/噪音监测 | 噪音源分析、治理方案 | 🟡 中 |
| 空气质量/PM2.5 | 污染源分析、管控措施 | 🔴 高 |

### 智能内容生成

模拟系统会根据选择的数据类型、涉及区域数量，智能生成：

- **问题归因**：深入分析问题产生的根本原因
- **处置建议**：分层次的解决方案（应急、中期、长期）
- **优先级评估**：自动评估问题的重要性和紧急程度

## 🎨 视觉效果

### 流式输出效果

- **打字机效果**：逐字符显示AI分析过程
- **动态指示器**：3个跳动的点显示AI正在思考
- **渐变背景**：紫色渐变背景突出分析内容
- **平滑动画**：淡入、滑动等过渡效果

### 模式标识

- 🟦 **蓝色开关**：模拟模式开启
- ⚠️ **蓝色提示框**：显示当前使用模拟模式
- 📝 **结果标注**：分析结果包含"模拟分析"标识

## 🔧 高级功能

### 1. 流式 vs 普通输出

- **流式输出**：实时显示打字机效果，体验类似ChatGPT
- **普通输出**：一次性显示完整结果，速度更快

### 2. 多区域协调

当选择的数据涉及多个区域时，分析结果会自动增加：
- 跨区域问题描述
- 协调处置建议
- 统一治理方案

### 3. 结果操作

- **复制结果**：一键复制完整分析内容到剪贴板
- **重新分析**：清空当前结果，开始新的分析
- **模式切换**：随时在模拟和真实API间切换

## 📋 使用示例

### 示例1：积水分析

选择数据：
- 城市事件：道路积水（朝阳区）
- 传感器：积水监测（朝阳区、海淀区）

模拟输出：
```
📍 **涉及区域**：朝阳区、海淀区

🔍 **分析结果**

**问题归因**
根据数据分析，该区域出现严重积水的主要原因包括：
1. 排水管网容量不足...
2. 地形地势影响...

**处置建议**
**应急处理措施**：
- 立即行动：调动3台大型抽排水车...

**优先级评估**
根据分析结果，本次事件的优先级为：🔴 高优先级
```

### 示例2：跨区域协调

当数据来自多个区域时，会额外显示：
```
**跨区域协调问题**：本次问题涉及朝阳区、海淀区等多个区域...
**跨区域协作**：建议成立联合工作组...
```

## 🛠️ 开发者信息

### 模拟数据结构

```typescript
interface MockAnalysisResponse {
  problemAttribution: string    // 问题归因分析
  disposalSuggestion: string    // 处置建议
  priority: 'high' | 'medium' | 'low'  // 优先级
}
```

### 核心文件

- `src/services/mockAnalysis.ts` - 模拟数据服务
- `src/composables/useMockStreamingAnalysis.ts` - 模拟流式分析
- `src/components/AIAnalysisPanel.vue` - 分析面板组件

### 自定义扩展

开发者可以：
1. 在 `analysisTemplates` 中添加新的分析场景
2. 修改 `analyzeDataForMock` 函数的判断逻辑
3. 调整流式输出的速度和效果

## 🔍 故障排除

### 常见问题

1. **分析无响应**
   - 确保已选择要分析的数据
   - 检查模拟模式开关是否开启

2. **显示异常**
   - 刷新页面重试
   - 检查浏览器控制台错误信息

3. **模式切换问题**
   - 重置分析后再切换模式
   - 确保已停止当前的分析过程

### 性能优化

- 模拟分析响应时间：1.5-2.5秒
- 流式输出打字速度：30-80ms/字符
- 支持大量数据：建议单次分析不超过10个数据项

## 📝 更新日志

### v1.0.0
- ✅ 模拟AI分析功能
- ✅ 5种分析场景模板
- ✅ 流式输出效果
- ✅ 多区域协调分析
- ✅ 模式切换功能

---

**注意**：模拟模式仅用于演示和测试，如需真实的AI分析功能，请配置百度文心一言API密钥并切换到真实API模式。